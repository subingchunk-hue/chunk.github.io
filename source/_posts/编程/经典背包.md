---
title: 经典背包
date: 2025-09-20 23:16:00
tags: [洛谷，编程]
categories: [编程]
excerpt: 动态规划经典问题——背包问题详解，包括0-1背包、完全背包、多重背包等变种及其优化方法。
---

## 基础题型

### 0-1背包

给定背包总容量$c$及n件物品的重量$w_i$、价值$v_i$，且每种物品最多只能选择1次。

$dp[j]$：容量为$j$的背包能装的最大价值。

转移方程：$dp[j]=max(dp[j],dp[j-w[i]]+v[i])$

```c++
vector<int> dp(c+1,0);
for(int i=0;i<n;i++)
    for(int j=c;j>=w[i];j--)
        dp[j]=max(dp[j],dp[j-w[i]]+v[i]);
```

[P1048 采药](https://www.luogu.com.cn/problem/P1048)

[P1049 装箱问题](https://www.luogu.com.cn/problem/P1049)

[P1060 开心的金明](https://www.luogu.com.cn/problem/P1060)

> tips：前面的几个例题都很简单，不附加代码，只需要仔细分析对应模板的哪个变量。

### 完全背包

每件物品可以选很多次——容量正序遍历

```c++
vector<int> dp(c+1,0);
for(int i=0;i<n;i++)
    for(int j=w[i];j<=c;j++)
        dp[j]=max(dp[j],dp[j-w[i]]+v[i]);
```

[P1616 疯狂的采药](https://www.luogu.com.cn/problem/P1616)

[P1853 投资的最大效益](https://www.luogu.com.cn/problem/P1853)

> P1853考虑每一年迭代处理，每一年的投资都可以看为一个完全背包。

### 多重背包

[P1776 宝物筛选](https://www.luogu.com.cn/problem/P1776)

[P1833 樱花](https://www.luogu.com.cn/problem/P1833)

| 类型     | 每件物品是否能选多次       | 内层循环顺序         | 状态转移方式                                                 |
| -------- | -------------------------- | -------------------- | ------------------------------------------------------------ |
| 01背包   | **每件物品最多选1次**      | `j` 从大到小（逆序） | `dp[j] = max(dp[j], dp[j - w[i]] + v[i])`                    |
| 完全背包 | **每件物品可以选多次**     | `j` 从小到大（正序） | `dp[j] = max(dp[j], dp[j - w[i]] + v[i])`                    |
| 多重背包 | **每件物品最多选`s[i]`次** | `j` 从大到小（逆序） | `dp[j] = max(dp[j], dp[j - k * w[i]] + k * v[i])`（可使用二进制优化） |

### 分组背包

[P1757 通天之分组背包](https://www.luogu.com.cn/problem/P1757)

[P1064 金明的预算方案](https://www.luogu.com.cn/problem/P1064)

## 变形问题

### 求方案数

[P1164 小A点菜](https://www.luogu.com.cn/problem/P1164)

[P1832 A+B Problem](https://www.luogu.com.cn/problem/P1832)

### 求具体方案

[P1757 通天之分组背包](https://www.luogu.com.cn/problem/P1757)

[P1064 金明的预算方案](https://www.luogu.com.cn/problem/P1064)

### 二维费用背包

[P1507 NASA的食物计划](https://www.luogu.com.cn/problem/P1507)

[P1855 榨取kkksc03](https://www.luogu.com.cn/problem/P1855)

### 依赖背包

[P1064 金明的预算方案](https://www.luogu.com.cn/problem/P1064)

[P2014 选课](https://www.luogu.com.cn/problem/P2014)

## 特殊题型

### 二进制优化

[P1776 宝物筛选](https://www.luogu.com.cn/problem/P1776)

### 单调队列优化

[P3423 [POI2005\]BAN-Bank Notes](https://www.luogu.com.cn/problem/P3423)

## 综合应用

### 混合背包

[P1941 飞扬的小鸟](https://www.luogu.com.cn/problem/P1941)

### 树形背包

[P2014 选课](https://www.luogu.com.cn/problem/P2014)

[P1273 有线电视网](https://www.luogu.com.cn/problem/P1273)