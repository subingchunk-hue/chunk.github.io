---
title: è®¡ç®—å‡ ä½•
date: 2025-09-7 14:25:00
tags: [ç¼–ç¨‹ï¼Œç«èµ›]
categories: [ç¼–ç¨‹]
excerpt: äºŒç»´è®¡ç®—å‡ ä½•åŸºç¡€çŸ¥è¯†æ€»ç»“ï¼ŒåŒ…æ‹¬å„ç§æ ¸å¿ƒæ¦‚å¿µå’Œç®—æ³•å®ç°ã€‚
---
è®¡ç®—å‡ ä½•

4.2 å‡¸åŒ…
4.3 åŠå¹³é¢äº¤
4.4 æœ€å°åœ†è¦†ç›–

4.6 ä¸‰ç»´å‡¸åŒ…
4.7 æ—‹è½¬å¡å£³
4.8 ä¸‰è§’å‰–åˆ†
4.9 æ‰«æçº¿
4.10 è‡ªé€‚åº”è¾›æ™®æ£®ç§¯åˆ†



## äºŒç»´è®¡ç®—å‡ ä½•åŸºç¡€

### åŸºç¡€å…ƒç´ çš„ä»£ç è¡¨ç¤º

##### ç‚¹|å‘é‡

```c++
struct Point{
	int x,y;
};
```

##### ç›´çº¿|å°„çº¿

```c++
æ–œç‡å¼ï¼šy=kx+b;
ç‚¹å‘å¼ï¼šp+tv  //pä¸ºç›´çº¿ä¸Šä¸€ç‚¹ï¼Œvä¸ºæ–¹å‘å‘é‡ï¼Œæ¯ä¸€ä¸ªtå¯¹åº”ä¸€ä¸ªç‚¹
```

##### çº¿æ®µ

è®°å½•å·¦å³ç«¯ç‚¹å³å¯ã€‚

##### å¤šè¾¹å½¢

ä½¿ç”¨æ•°ç»„æŒ‰ä¸€å®šé¡ºåºè®°å½•å¤šè¾¹å½¢çš„æ¯ä¸ªé¡¶ç‚¹å³å¯ã€‚

##### æ›²çº¿å›¾å½¢

ä¸€äº›ç‰¹æ®Šæ›²çº¿ï¼Œå¦‚å‡½æ•°å›¾åƒç­‰ä¸€èˆ¬è®°å½•å…¶è§£æå¼ã€‚å¯¹äºåœ†ï¼Œç›´æ¥è®°å½•å…¶åœ†å¿ƒå’ŒåŠå¾„å³å¯ã€‚

##### å‰ç§¯

$\overrightarrow {a} Ã— \overrightarrow {b}=x_1y_2-x_2y_1$

> - å°äº0ï¼š båœ¨açš„å³è¾¹
> - å¤§äº0ï¼š båœ¨açš„å·¦è¾¹
> - ç­‰äº0ï¼š aã€bå…±çº¿

```c++
//å‘é‡
struct Point{  
	double x,y;
};
double dot(Point a, Point b) { return a.x*b.x + a.y*b.y; }  //ç‚¹ç§¯
double cross(Point a, Point b) { return a.x*b.y - a.y*b.x; } //å‰ç§¯
double length(Point a) { return sqrt(dot(a,a)); } //é•¿åº¦
```

### åŸºæœ¬å…¬å¼

1. æ­£å¼¦å®šç†         $ \begin{aligned} \frac{A}{sinA}=\frac{b}{sinB}+\frac{c}{sinC}\end{aligned} $
2. ä½™å¼¦å®šç†        

### åŸºæœ¬æ“ä½œ

##### åˆ¤æ–­ç‚¹ä¸ç›´çº¿çš„ä½ç½®

å·²çŸ¥ç›´çº¿çš„æ–¹å‘å‘é‡$\mathbf{v}$ï¼Œä»¥åŠç›´çº¿ä¸Šä¸€ç‚¹Pï¼Œåˆ¤æ–­ç‚¹Qä¸ç›´çº¿çš„å…³ç³»ã€‚

è®¡ç®—$\mathbf{v}Ã—\overrightarrow {PQ}$ï¼Œè‹¥å‘é‡ç§¯ä¸ºï¼ˆå·¦å³ç›¸å¯¹äºæ–¹å‘å‘é‡è€Œè¨€ï¼‰

- è´Ÿï¼šQåœ¨ç›´çº¿å³ä¾§
- æ­£ï¼šQåœ¨ç›´çº¿å·¦ä¾§
- 0ï¼š Qåœ¨ç›´çº¿ä¸Š

```c++
void on_line(Point p,Point a,Point b){
	Vector v = b - a,u = p - a;   //vectoræ˜¯å‘é‡çš„æ„æ€
	if(cross(v,u) == 0)  cout << "on";
	else if(cross(v,u) > 0)  cout << "left";
	else  cout << "left";
}
```

##### åˆ¤æ–­ä¸¤æ¡çº¿æ®µæ˜¯å¦ç›¸äº¤

1. æ–œç‡ç›¸ç­‰ï¼Œä¸¤çº¿æ®µå¹³è¡Œï¼Œåˆ™ä¸å¯èƒ½ç›¸äº¤ï¼›

2. å¿«é€Ÿæ’æ–¥å®éªŒï¼šä»¥ä¸¤çº¿æ®µä¸ºå¯¹è§’çº¿çš„çŸ©å½¢åŒºåŸŸè‹¥ä¸é‡å åˆ™ä¸€å®šä¸ç›¸äº¤ï¼›

3. è·¨ç«‹å®éªŒï¼šåˆ†åˆ«åˆ¤æ–­ä¸¤æ¡çº¿æ®µçš„ä¸¤ä¸ªç«¯ç‚¹æ˜¯å¦ä½äºå¦ä¸€æ¡çº¿æ®µçš„ä¸¤ä¾§ï¼›

   ```c++
   bool segment_intersection(Point a1,Point a2,Point b1,Point b2)
   {
   	double c1 = cross(a2 - a1,b1 - a1), c2 = cross(a2 - a1,b2 - a1);
   	double c3 = cross(b2 - b1,a2 - b1), c4 = cross(b2 - b1,a1 - b1);
   	return (c1 * c2 <= 0 && c3 * c4 <= 0);
   }
   ```

##### åˆ¤æ–­ä¸€ç‚¹æ˜¯å¦åœ¨å¤šè¾¹å½¢å†…éƒ¨

###### å…‰çº¿æŠ•å°„ç®—æ³•

ä»¥è¯¥ç‚¹ä¸ºç«¯ç‚¹å¼•å‡ºä¸€æ¡å°„çº¿ï¼Œå¦‚æœè¿™æ¡å°„çº¿ä¸å¤šè¾¹å½¢æœ‰å¥‡æ•°ä¸ªäº¤ç‚¹ï¼Œåˆ™è¯¥ç‚¹åœ¨å¤šè¾¹å½¢å†…éƒ¨ï¼Œå¦åˆ™è¯¥ç‚¹åœ¨å¤šè¾¹å½¢å¤–éƒ¨ï¼Œæˆ‘ä»¬ç®€è®°ä¸º**å¥‡å†…å¶å¤–**ã€‚

###### å›è½¬æ•°ç®—æ³•

æŠŠè¯¥ç‚¹ä¸å¤šè¾¹å½¢çš„æ‰€æœ‰é¡¶ç‚¹è¿æ¥èµ·æ¥ï¼Œè®¡ç®—ç›¸é‚»ä¸¤è¾¹å¤¹è§’çš„å’Œã€‚æ³¨æ„è¿™é‡Œçš„å¤¹è§’æ˜¯**æœ‰æ–¹å‘çš„**ã€‚å¦‚æœå¤¹è§’å’Œä¸º0ï¼Œåˆ™è¿™ä¸ªç‚¹åœ¨å¤šè¾¹å½¢å¤–ï¼Œå¦åˆ™åœ¨å¤šè¾¹å½¢å†…ã€‚

##### æ±‚ä¸¤æ¡ç›´çº¿çš„äº¤ç‚¹

å…ˆç¡®å®šä¸¤æ¡ç›´çº¿æ˜¯å¦å¹³è¡Œï¼Œè‹¥ç›¸äº¤åˆ™è®¡ç®—äº¤ç‚¹ã€‚

```c++
Point intersection(Point p, Vector v, Point q, Vector w){ //ä½¿ç”¨ç‚¹å‘å¼è¡¨ç¤ºç›´çº¿
	Vector u=p-q;
	double t=cross(w,u)/cross(v,w);
	return {p.first+t*v.first, p.second+t*v.second};
}
```

##### æ±‚ä»»æ„å¤šè¾¹å½¢çš„å‘¨é•¿å’Œé¢ç§¯

1. ä¸‰è§’å½¢çš„é¢ç§¯

   ```c++
   p = (a+b+c) / 2;
   s = sqrt(p * (p-a) * (p-b) * (p-c));
   ```

2. å¤šè¾¹å½¢çš„é¢ç§¯(é‹å¸¦å…¬å¼)

   ä»»å–å¹³é¢ä¸Šä¸€ç‚¹Pï¼Œå¤šè¾¹å½¢é¢ç§¯ä¸ºï¼ˆä»¥å››è¾¹å½¢ABCDä¸ºä¾‹ï¼‰ï¼š

   $ \begin{aligned} S_{å¤šè¾¹å½¢é¢ç§¯}=\frac{\overrightarrow {PA}Ã—\overrightarrow {AB}+\overrightarrow {PB}Ã—\overrightarrow {BC}+\overrightarrow {PC}Ã—\overrightarrow {CD}+\overrightarrow {PD}Ã—\overrightarrow {DA}}{2}\end{aligned} $

   ç»™å®šä¸€ä¸ªæŒ‰é¡ºæ—¶é’ˆ/é€†æ—¶é’ˆé¡ºåºæ’åˆ—çš„å¤šè¾¹å½¢é¡¶ç‚¹åºåˆ—ï¼Œ$P_0,P_1,...,P_{n}$ï¼Œæœ¬è´¨å°±æ˜¯ä¸€å †å‰ç§¯çš„å’Œï¼ˆè€ƒè™‘$P_n=P_0$ï¼Œå³æ„æˆä¸€ä¸ªå›è·¯ï¼‰ã€‚
   
   ```c++
   double area(vector<Point> p){
   	double area=0;
       for(int i=0;i<=n;i++) area+=cross(p[i],p[i+1]);
       return abs(area)/2.0;
   }
   //åœ¨å‡¸åŒ…ã€ä¸‰è§’å‰–åˆ†é‡Œ
   double area(vector<Point> p){
   	double area=0;
       for(int i=0;i<=n-1;i++) area+=cross(p[i]-p[0],p[i+1]-p[0]);
       return abs(area)/2.0;
   }
   ```

##### åœ†ä¸ç›´çº¿ç›¸å…³

###### æ±‚ç›´çº¿ä¸åœ†çš„äº¤ç‚¹

é¦–å…ˆåˆ¤æ–­ç›´çº¿ä¸åœ†çš„ä½ç½®å…³ç³»ã€‚å¦‚æœç›´çº¿ä¸åœ†ç›¸ç¦»åˆ™æ— äº¤ç‚¹ï¼Œè‹¥ç›¸åˆ‡åˆ™å¯ä»¥åˆ©ç”¨åˆ‡çº¿æ±‚å‡ºåˆ‡ç‚¹ä¸åŠå¾„æ‰€åœ¨ç›´çº¿ï¼Œä¹‹åè½¬åŒ–ä¸ºæ±‚ä¸¤ç›´çº¿äº¤ç‚¹ã€‚

è‹¥æœ‰ä¸¤äº¤ç‚¹ï¼Œåˆ™å¯ä»¥åˆ©ç”¨å‹¾è‚¡å®šç†æ±‚å‡ºä¸¤äº¤ç‚¹çš„ä¸­ç‚¹ï¼Œç„¶åæ²¿ç›´çº¿æ–¹å‘åŠ ä¸ŠåŠå¼¦é•¿å³å¯ã€‚

###### æ±‚ä¸¤åœ†äº¤ç‚¹

é¦–å…ˆæˆ‘ä»¬åˆ¤æ–­ä¸€ä¸‹ä¸¤ä¸ªåœ†çš„ä½ç½®å…³ç³»ï¼Œå¦‚æœå¤–ç¦»æˆ–å†…å«åˆ™æ— äº¤ç‚¹ï¼Œå¦‚æœç›¸åˆ‡ï¼Œå¯ä»¥ç®—å‡ºä¸¤åœ†å¿ƒè¿çº¿çš„æ–¹å‘å‘é‡ï¼Œç„¶ååˆ©ç”¨ä¸¤åœ†åŠå¾„è®¡ç®—å‡ºå¹³ç§»è·ç¦»ï¼Œæœ€åå°†åœ†å¿ƒæ²¿è¿™ä¸ªæ–¹å‘å‘é‡è¿›è¡Œå¹³ç§»å³å¯ã€‚

å¦‚æœä¸¤åœ†ç›¸äº¤ï¼Œåˆ™å¿…æœ‰ä¸¤ä¸ªäº¤ç‚¹ï¼Œå¹¶ä¸”å…³äºä¸¤åœ†å¿ƒè¿çº¿å¯¹ç§°ã€‚å› æ­¤ä¸‹é¢åªè¯´æ˜ä¸€ä¸ªäº¤ç‚¹çš„æ±‚æ³•ï¼Œå¦ä¸€ä¸ªäº¤ç‚¹å¯ä»¥ç”¨ç±»ä¼¼æ–¹æ³•æ±‚å‡ºã€‚

æˆ‘ä»¬å…ˆå°†ä¸€åœ†åœ†å¿ƒä¸äº¤ç‚¹ç›¸è¿ï¼Œæ±‚å‡ºä¸¤åœ†å¿ƒè¿çº¿ä¸è¯¥è¿çº¿æ‰€æˆè§’ã€‚è¿™æ ·ï¼Œå°†ä¸¤åœ†å¿ƒè¿çº¿çš„æ–¹å‘å‘é‡æ—‹è½¬è¿™ä¸ªè§’åº¦ï¼Œå°±æ˜¯åœ†å¿ƒä¸äº¤ç‚¹ç›¸è¿å½¢æˆçš„åŠå¾„çš„æ–¹å‘å‘é‡äº†ã€‚æ²¿æ–¹å‘å‘é‡æ–¹å‘å°†åœ†å¿ƒå¹³ç§»åŠå¾„é•¿åº¦å³å¯å¾—åˆ°ä¸€ä¸ªäº¤ç‚¹ã€‚

##### æè§’åº

## ä¸‰ç»´è®¡ç®—å‡ ä½•åŸºç¡€

##### ä¸‰æ­£å¼¦å®šç†

äºŒé¢è§’åº¦æ•°ä¸º$a$ï¼Œå¹³é¢Mä¸Šæœ‰ä¸€æ¡å°„çº¿ACï¼Œå®ƒå’Œæ£±ABæ‰€æˆè§’ä¸º$b$ï¼Œå’Œå¹³é¢Næ‰€æˆè§’ä¸º$r$ï¼Œåˆ™

$sin r=sina*sinb$

##### ä¸‰ä½™å¼¦å®šç†

è®¾Oä¸ºå¹³é¢ä¸Šä¸€ç‚¹ï¼Œè¿‡å¹³é¢å¤–ä¸€ç‚¹Bçš„ç›´çº¿BO åœ¨é¢ä¸Šçš„å°„å½±ä¸ºAOï¼ŒOCä¸ºé¢ä¸Šçš„ä¸€æ¡ç›´çº¿ï¼Œé‚£ä¹ˆ $âˆ COBï¼Œâˆ AOCï¼Œâˆ AOB$ä¸‰è§’çš„ä½™å¼¦å…³ç³»ä¸º$cosâˆ BOC=cosâˆ AOB*cosâˆ AOC$ï¼ˆ$âˆ AOB$å’Œ$âˆ AOC$åªèƒ½æ˜¯é”è§’ï¼‰

## å¸¸ç”¨è·ç¦»

#### æ¬§æ°è·ç¦»

[æ¬§å¼è·ç¦» ä¸­](https://www.luogu.com.cn/problem/P3958#ide)

#### æ›¼å“ˆé¡¿è·ç¦»

$d(A,B)=|x_1-x_2|+|y_1-y_2|$

[æ›¼å“ˆé¡¿è·ç¦» æ˜“](https://www.luogu.com.cn/problem/P5098#ide)

---

###### æ›¼å“ˆé¡¿è·ç¦»æœ€å°åŒ–é—®é¢˜

ç»™å®šå¹³é¢ä¸Šnä¸ªç‚¹ï¼Œæ‰¾åˆ°ä¸€ä¸ªç‚¹Pï¼Œä½¿å¾—æ‰€æœ‰ç‚¹åˆ°Pçš„æ›¼å“ˆé¡¿è·ç¦»ä¹‹å’Œæœ€å°ã€‚

xæ–¹å‘å’Œyæ–¹å‘åˆ†å¼€å¤„ç†ï¼

- ä¸€ç»´æƒ…å†µï¼šxçš„ä¸­ä½æ•°
- äºŒç»´æƒ…å†µï¼šåˆ†åˆ«å–xã€yçš„ä¸­ä½æ•°ç»„åˆèµ·æ¥å³ä¸ºæ‰€æ±‚åæ ‡

å˜å½¢ï¼š

- å¿…é¡»é€‰ç»™å®šç‚¹ä¹‹ä¸€
  1. åˆ†åˆ«å¯¹xã€yæ’åºå¹¶è®¡ç®—å‰ç¼€å’Œ
  2. éå†æ‰€æœ‰ç‚¹è®¡ç®—æ‰¾åˆ°æœ€å°è·ç¦»å’Œï¼ˆæ’åºåçš„xã€yå¦å¼€æ•°ç»„å­˜å‚¨ï¼‰
- åŠ æƒæ›¼å“ˆé¡¿è·ç¦»ï¼ˆæ¯ä¸ªç‚¹$i$æœ‰æƒé‡ï¼‰â€”â€”å¸¦æƒä¸­ä½æ•°
  1. åˆ†åˆ«å¯¹xã€yæ’åºï¼Œç´¯åŠ æƒé‡ç›´åˆ°è¶…è¿‡æ€»æƒé‡çš„ä¸€åŠ
  2. å½“å‰ç‚¹å°±æ˜¯å¸¦æƒä¸­ä½æ•°
- é€‰å¤šä¸ªç‚¹ï¼Œä½¿æ‰€æœ‰ç‚¹åˆ°æœ€è¿‘ç‚¹è·ç¦»å’Œæœ€å°

---

#### åˆ‡æ¯”é›ªå¤«è·ç¦»

$d(A,B)=max(âˆ£x_1âˆ’x_2âˆ£,âˆ£y_1âˆ’y_2âˆ£)$

> ç‚¹$(x_1,y_1),(x_2,y_2)$çš„æ›¼å“ˆé¡¿è·ç¦» = ç‚¹$(x_1+y_1,x_1-y_1),(x_2+y_2,x_2-y_2)$çš„åˆ‡æ¯”é›ªå¤«è·ç¦»ã€‚

> ç‚¹$(x_1,y_1),(x_2,y_2)$çš„åˆ‡æ¯”é›ªå¤«è·ç¦» = ç‚¹$(\frac{x_1+y_1}{2},\frac{x_1-y_1}{2}),(\frac{x_2+y_2}{2},\frac{x_2-y_2}{2})$çš„æ›¼å“ˆé¡¿è·ç¦»ã€‚

[æ¾é¼ èšä¼š](https://www.luogu.com.cn/problem/P3964)

ç”±é¢˜æ„ç»™å‡ºçš„ç§»åŠ¨æ–¹å¼ï¼Œæˆ‘ä»¬å‘ç°å…¶å¯¹åº”çš„ç§»åŠ¨è·ç¦»å°±æ˜¯åˆ‡æ¯”é›ªå¤«è·ç¦»ï¼Œè€Œåˆ‡æ¯”é›ªå¤«è·ç¦»å¾ˆéš¾ç›´æ¥å¤„ç†ï¼Œæˆ‘ä»¬è€ƒè™‘é€šè¿‡åæ ‡å˜æ¢å°†å®ƒå˜æˆæ›´ç†Ÿæ‚‰çš„æ›¼å“ˆé¡¿è·ç¦»ã€‚

å³åªéœ€å°†é¢˜ç›®ç»™çš„åæ ‡è¿›è¡Œå˜æ¢ï¼Œç„¶ååœ¨è¿™äº›ç‚¹ä¸­æ‰¾ä¸€ä¸ªä½¿å…¶ä»–ç‚¹åˆ°å®ƒçš„è·ç¦»ä¹‹å’Œæœ€å°ã€‚

ä¸»è¦å°±æ˜¯æ³¨æ„ä¸€ä¸‹è®¡ç®—è·ç¦»å’Œçš„æ—¶å€™è¦åˆ†å·¦å³ï¼ˆç»å¯¹å€¼ï¼‰ã€‚

```c++
#include <iostream>
#include<vector>
#include<algorithm>
#include<climits>
using namespace std;
using ll=long long;
typedef pair<ll,ll> pii;
int main(){
    int n;
    cin >> n;
    vector<ll> x0(n+1,0),y0(n+1,0);
    vector<ll> x(n+1,0),y(n+1,0);
    vector<ll> pre_x(n+1,0),pre_y(n+1,0);
    for(int i=1;i<=n;i++) {
        ll s,t;
        cin >> s >> t;
        x0[i]=s+t;
        y0[i]=s-t;
        x[i]=s+t;
        y[i]=s-t;
    }
    sort(x.begin()+1,x.end());
    sort(y.begin()+1,y.end());
    for(int i=1;i<=n;i++){
        pre_x[i]=pre_x[i-1]+x[i];
        pre_y[i]=pre_y[i-1]+y[i];
    }
    ll ans=LLONG_MAX;
    for(int i=1;i<=n;i++){
        auto it_x=lower_bound(x.begin()+1,x.begin()+n+1,x0[i]);
        auto it_y=lower_bound(y.begin()+1,y.begin()+n+1,y0[i]);
        int pos_x=it_x-x.begin();
        int pos_y=it_y-y.begin();

        ll sum_x = (pos_x-1) * x0[i] - pre_x[pos_x-1] + pre_x[n] - pre_x[pos_x] - (n-pos_x)*x0[i];
        ll sum_y = (pos_y-1) * y0[i] - pre_y[pos_y-1] + pre_y[n] - pre_y[pos_y] - (n-pos_y)*y0[i];

        ans=min(ans,sum_x+sum_y);
    }
    cout << ans/2 << endl;
    return 0;
}
```

[pairs åŠ¨ç‰©å¯¹æ•°](https://www.luogu.com.cn/problem/P4648)

ï¼ˆæœ‰ç‚¹å¤æ‚ï¼Œåç»­è¡¥ï¼‰

#### é—µå¯å¤«æ–¯åŸºè·ç¦»

## Pickå®šç†

ç»™å®šé¡¶ç‚¹å‡ä¸ºæ•´ç‚¹çš„ç®€å•å¤šè¾¹å½¢ï¼Œå…¶é¢ç§¯$A$å’Œå†…éƒ¨æ ¼ç‚¹æ•°ç›®$i$ã€è¾¹ä¸Šæ ¼ç‚¹æ•°ç›®$b$çš„å…³ç³»ï¼š$A=i+\frac{b}{2}-1$

##### ä¾‹é¢˜

>  åœ¨ç›´è§’åæ ‡ç³»ä¸­ï¼Œä¸€ä¸ªæœºå™¨äººä»ä»»æ„ç‚¹å‡ºå‘è¿›è¡Œ$n$æ¬¡ç§»åŠ¨ï¼Œæ¯æ¬¡å‘å³ç§»åŠ¨ $ğ‘‘ğ‘¥$ï¼Œå‘ä¸Šç§»åŠ¨ $dy$ï¼Œæœ€åä¼šå½¢æˆä¸€ä¸ªå¹³é¢ä¸Šçš„å°é—­ç®€å•å¤šè¾¹å½¢ï¼Œæ±‚è¾¹ä¸Šçš„ç‚¹çš„æ•°é‡ï¼Œå¤šè¾¹å½¢å†…çš„ç‚¹çš„æ•°é‡ï¼Œå¤šè¾¹å½¢é¢ç§¯ã€‚

ç»™å®šn+1ä¸ªå‘é‡ï¼ˆæ¯æ¬¡ç§»åŠ¨éƒ½æ˜¯ä¸€ä¸ªå‘é‡ï¼‰ï¼Œå…¶ä¸­$p_0=(0,0),p_1=p_0+(dx_1,dy_1),...,p_n=p_0$

æ€»è¾¹ç•Œç‚¹æ•°ï¼š$B=âˆ‘gcdâ¡(âˆ£dx_iâˆ£,âˆ£dy_iâˆ£)$ï¼Œ

å¤šè¾¹å½¢é¢ç§¯ï¼š$A=\frac{|âˆ‘(x_iy_{i+1}-x_{i+1}y_i)|}{2}$ï¼ˆé‹å¸¦å…¬å¼ï¼‰

å¤šè¾¹å½¢å†…éƒ¨ç‚¹ä¸ªæ•°ï¼ˆpickå®šç†ï¼‰

```c++
#include<iostream>
#include<vector>
#include<cmath>
using namespace std;

struct Point{
    int x,y;
};

int gcd(int a,int b){
    a = abs(a);
    b = abs(b);
    return b==0?a:gcd(b,a%b);
}

int main(){
    int n;
    cin >> n;
    vector<Point> p(n+1);
    vector<Point> m(n+1); 
    
    p[0] = {0,0};
    for(int i=1;i<=n;i++){
        int a,b;
        cin >> a >> b;
        p[i].x = p[i-1].x + a;
        p[i].y = p[i-1].y + b;
        m[i].x = a;
        m[i].y = b;
    }
    
    // 1. æ±‚è¾¹ä¸Šç‚¹çš„ä¸ªæ•° B
    int B = 0;
    for(int i=1;i<=n;i++) 
        B += gcd(m[i].x, m[i].y);
    
    // 2. æ±‚å¤šè¾¹å½¢çš„é¢ç§¯ Aï¼ˆé‹å¸¦å…¬å¼ï¼‰
    long long area2 = 0; 
    p[n] = p[0];
    for(int i=0;i<n;i++) 
        area2 += (long long)p[i].x * p[i+1].y - (long long)p[i+1].x * p[i].y;
    area2 = abs(area2);
    double area = area2 / 2.0;
    // 3. ç”¨ pick å®šç†æ±‚å†…éƒ¨ç‚¹æ•° I
    int I = (area2 - B) / 2 + 1;
    
    cout << B << endl << I << endl << area << endl;
    return 0;
}
```

## ä¸‰è§’å‰–åˆ†

$DT$ï¼šäºŒç»´å‡ ä½•ä¸­çš„å®Œç¾ä¸‰è§’å‰–åˆ†

###### æ„é€ DTçš„åˆ†æ²»ç®—æ³•

1. å°†å®šç‚¹é›†æŒ‰ç…§xåæ ‡å‡åºæ’åˆ—ï¼›
2. ç‚¹é›†æœ‰åºä¹‹åï¼ŒæŒ‰ç…§åˆ†æ²»å°†å…¶ä¸æ–­åˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ï¼Œç›´åˆ°å­ç‚¹é›†å¤§å°ä¸è¶…è¿‡3ï¼Œè¿™äº›å­ç‚¹é›†æ˜¯ä¸‰è§’å½¢æˆ–çº¿æ®µï¼›

## å‡¸åŒ…

å‡¸åŒ…ï¼šåœ¨å¹³é¢ä¸Šèƒ½åŒ…å«æ‰€æœ‰ç»™å®šç‚¹çš„æœ€å°å‡¸å¤šè¾¹å½¢ï¼ˆæ‰€æœ‰å†…è§’å¤§å°éƒ½åœ¨[0,ğœ‹]ä¹‹å‰ï¼‰ã€‚

ç†è§£ä¸ºç”¨ä¸€ä¸ªæ©¡çš®ç­‹åŒ…å«ä½æ‰€æœ‰ç»™å®šç‚¹çš„å½¢æ€ï¼Œç”¨æœ€å°çš„å‘¨é•¿ã€‚

åŒ…å«ï¼šå¯ä»¥åœ¨æ©¡çš®ç­‹ä¸Šï¼Œä¹Ÿå¯ä»¥åœ¨æ©¡çš®ç­‹å›´ä½åŒºåŸŸé‡Œé¢ï¼ˆå‡¸å¤šè¾¹å½¢åœ¨å‘¨é•¿ä¸Šä¸€å®šæ˜¯æœ€ä¼˜çš„ï¼‰ã€‚

#### äºŒç»´å‡¸åŒ…

###### Andrew ç®—æ³•æ±‚å‡¸åŒ…ï¼ˆå¸¸ç”¨ï¼‰

$o(nlogn)$ï¼Œnä¸ºå¾…æ±‚å‡¸åŒ…ç‚¹é›†çš„å¤§å°ã€‚

1. æŠŠæ‰€æœ‰ç‚¹ä»¥æ¨ªåæ ‡ä¸ºç¬¬ä¸€å…³é”®å­—ï¼Œçºµåæ ‡ä¸ºç¬¬äºŒå…³é”®å­—æ’åºï¼›
2. ç”¨ä¸€ä¸ªå•è°ƒæ ˆæ¥ç»´æŠ¤ä¸Šä¸‹å‡¸å£³

###### Graham æ‰«ææ³•

1. æ‰¾åˆ°æ‰€æœ‰ç‚¹ä¸­çºµåæ ‡æœ€å°çš„ç‚¹Pï¼Œè¯¥ç‚¹ä¸€å®šåœ¨å‡¸åŒ…ä¸Šï¼›
2. å°†æ‰€æœ‰ç‚¹ä»¥ç›¸å¯¹äºç‚¹Pçš„æè§’å¤§å°ä¸ºå…³é”®å­—è¿›è¡Œæ’åºï¼›
3. ä»ç‚¹På‡ºå‘åœ¨å‡¸åŒ…ä¸Šé€†æ—¶é’ˆèµ°ï¼Œæ‰€æœ‰ç»è¿‡çš„ç‚¹ä¸€å®šæ˜¯å·¦æ‹çš„ï¼Œå°±æ˜¯è¯´è¿ç»­ç»è¿‡çš„ä¸‰ä¸ªç‚¹ä¸€å®šæ»¡è¶³å†…ç§¯å¤§äºç­‰äº0ï¼›

æ–°å»ºæ ˆç”¨äºå­˜å‚¨å‡¸åŒ…çš„ä¿¡æ¯ï¼Œå…ˆå°†På‹å…¥æ ˆä¸­ï¼Œç„¶åæŒ‰ç…§æè§’åºä¾æ¬¡å°è¯•åŠ å…¥æ¯ä¸€ä¸ªç‚¹ã€‚å¦‚æœå³æ‹äº†å°±å¼¹å‡ºæ ˆé¡¶ï¼Œä¸æ–­é‡å¤è¯¥è¿‡ç¨‹ç›´è‡³æ ˆä¸­åªå‰©ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚

å¦‚æœåæ ‡æ˜¯æµ®ç‚¹æ•°ï¼Œæœ€å¥½åŠ å…¥ä¸€ä¸ªepsï¼Œåœ¨å»é‡å’Œåˆ¤æ–­crossæ—¶ç”¨epsã€‚

```c++
#include <bits/stdc++.h>
using namespace std;
using ll = long long;

struct Point {
    ll x, y;
};

// cross product (b - a) x (c - a)
ll cross(const Point& a, const Point& b, const Point& c) {
    return (b.x - a.x) * (c.y - a.y) - (b.y - a.y) * (c.x - a.x);
}

ll dist2(const Point& a, const Point& b) {
    return (a.x - b.x) * (a.x - b.x) + (a.y - b.y) * (a.y - b.y);
}

// ------------------ Andrew (Monotonic Chain) ------------------
vector<Point> Andrew(vector<Point> pts) {
    //æ£€æŸ¥è¾¹ç•Œæƒ…å†µ
    if (pts.size() <= 1) return pts;
    sort(pts.begin(), pts.end());

    //å»é‡
    pts.erase(unique(pts.begin(), pts.end()), pts.end());
    if (pts.size() <= 1) return pts;

    //1.æ‰«æåŠ å…¥ä¸‹å‡¸å£³
    vector<Point> lower, upper;
    for (const Point& p : pts) {
        while (lower.size() >= 2 && cross(lower[lower.size()-2], lower.back(), p) <= 0)
            lower.pop_back();
        lower.push_back(p);
    }
    /*
    for(int i=0;i<p.size();i++){
        while(lower.size()>=2&&cross(p[i-2],p[i-1],p[i])<=0) lower.pop_back();
        lower.push_back(p[i]);
    }
    */

    //2.ä¸Šå‡¸å£³
    for (int i = (int)pts.size() - 1; i >= 0; --i) {
        const Point& p = pts[i];
        while (upper.size() >= 2 && cross(upper[upper.size()-2], upper.back(), p) <= 0)
            upper.pop_back();
        upper.push_back(p);
    }

    //3.å»å¤´å»å°¾ç„¶ååˆå¹¶
    lower.pop_back();
    upper.pop_back(); 
    vector<Point> hull;
    hull.reserve(lower.size() + upper.size());
    for (auto &p : lower) hull.push_back(p);
    for (auto &p : upper) hull.push_back(p);

    return hull;
}

// ------------------ Graham Scan ------------------
vector<Point> Graham(vector<Point> pts) {
    if (pts.size() <= 1) return pts;
    sort(pts.begin(), pts.end());
    pts.erase(unique(pts.begin(), pts.end()), pts.end());
    if (pts.size() <= 1) return pts;

    int pivot_idx = 0;
    for (int i = 1; i < (int)pts.size(); ++i) {
        if (pts[i].y < pts[pivot_idx].y || (pts[i].y == pts[pivot_idx].y && pts[i].x < pts[pivot_idx].x))
            pivot_idx = i;
    }
    swap(pts[0], pts[pivot_idx]);
    Point p0 = pts[0];

    sort(pts.begin() + 1, pts.end(), [p0](const Point& a, const Point& b) {
        ll c = cross(p0, a, b);
        if (c != 0) return c > 0;
        return dist2(a, p0) < dist2(b, p0);
    });

    vector<Point> st;
    st.push_back(pts[0]);
    st.push_back(pts[1]);

    for (int i = 2; i < (int)pts.size(); ++i) {
        while (st.size() >= 2 && cross(st[st.size()-2], st.back(), pts[i]) <= 0)
            st.pop_back();
        st.push_back(pts[i]);
    }

    return st;
}

int main() {
    ios::sync_with_stdio(0);
    cin.tie(0);

    int n;
    cin >> n;
    vector<Point> pts;
    pts.reserve(n);
    for (int i = 0; i < n; ++i) {
        ll x, y; cin >> x >> y;
        pts.emplace_back(x, y);
    }

    vector<Point> hull = Andrew(pts);
    // vector<Point> hull = Graham(pts);

    cout << hull.size() << '\n';
    for (auto &p : hull) cout << p.x << ' ' << p.y << '\n';
    return 0;
}
```

#### é—µç§‘å¤«æ–¯åŸºå’Œ

ç‚¹é›†På’Œç‚¹é›†Qçš„é—µå¯å¤«æ–¯åŸºå’Œ$P+Q=\{a+b|aâˆˆP,bâˆˆQ\}$ï¼Œå³æŠŠPä¸­çš„æ¯ä¸€ä¸ªç‚¹å’ŒQä¸­çš„æ¯ä¸€ä¸ªç‚¹ç›¸åŠ ï¼Œå¾—åˆ°ä¸€ä¸ªæ–°çš„ç‚¹é›†ã€‚

å‡ ä½•æ„ä¹‰ï¼šæŠŠQå¹³ç§»åˆ°Pçš„æ¯ä¸ªç‚¹ä¸Šï¼Œæ‰«å‡ºæ¥çš„åŒºåŸŸã€‚ï¼ˆå‡¸åŒ…+å‡¸åŒ…=å‡¸åŒ…ï¼‰

- åˆ¤æ–­ä¸¤ä¸ªå‡¸å¤šè¾¹å½¢æ˜¯å¦ç›¸äº¤

  ç®—å‡º$C=AâŠ•(-B)$ï¼Œè‹¥åŸç‚¹åœ¨Cé‡Œé¢ï¼Œåˆ™ä¸¤ä¸ªå‡¸å¤šè¾¹å½¢ç›¸äº¤ã€‚

- è†¨èƒ€ã€åç§»

æ ¸å¿ƒæ€æƒ³ï¼š

1. æŠŠä¸¤ä¸ªå‡¸å¤šè¾¹å½¢æŒ‰é€†æ—¶é’ˆé¡ºåºå­˜å¥½ï¼›
2. ä»å„è‡ªçš„æœ€å·¦ä¸‹è§’ç‚¹å¼€å§‹æŠŠè¾¹å‘é‡ï¼ˆå½“å‰é¡¶ç‚¹-å‰ä¸€ä¸ªé¡¶ç‚¹ï¼‰é€ä¸ªåˆå¹¶ã€‚

```c++
struct Point {
  long long x, y;

  friend Point operator+(const Point &a, const Point &b) {
    return {a.x + b.x, a.y + b.y};
  }

  friend Point operator-(const Point &a, const Point &b) {
    return {a.x - b.x, a.y - b.y};
  }

  friend long long operator^(const Point &a, const Point &b) {
    return a.x * b.y - a.y * b.x;
  }
};

bool cmp(const Point &a, const Point &b) {
    return (a ^ b) < 0;  
}

vector<Point> minkowski_sum(vector<Point> a, vector<Point> b) {
  vector<Point> c{a[0] + b[0]};
  for (int i = 0; i + 1 < a.size(); ++i) a[i] = a[i + 1] - a[i];
  for (int i = 0; i + 1 < b.size(); ++i) b[i] = b[i + 1] - b[i];
  a.pop_back(); 
  b.pop_back();
  c.resize(a.size() + b.size() + 1);
  merge(a.begin(), a.end(), b.begin(), b.end(), c.begin() + 1, cmp);
  for (int i = 1; i < c.size(); ++i) c[i] = c[i] + c[i - 1];
  return c;
}
```

#### ä¸‰ç»´å‡¸åŒ…

1. å¯¹å…¶å¾®å°æ‰°åŠ¨ï¼Œé¿å…å‡ºç°å››ç‚¹å…±é¢çš„æƒ…å†µï¼›

   ç»™ç‚¹åæ ‡åŠ ä¸Šä¸€ä¸ªæå°çš„éšæœºæ•°ï¼ˆ$ep=1e-9$ï¼‰ï¼Œæ‰°åŠ¨é‡è¶³å¤Ÿå°ä¸ä¼šå½±å“æœ€ç»ˆç»“æœ

2. å¯¹äºå·²çŸ¥çš„å‡¸åŒ…ï¼Œå¢åŠ ä¸€ä¸ªæ–°ç‚¹ï¼Œåªè¦åˆ¤æ–­å®ƒæ˜¯å¦èƒ½çœ‹åˆ°å½“å‰å‡¸åŒ…çš„æŸäº›é¢ï¼Œå¦‚æœå¯ä»¥åˆ™åˆ å»è¯¥ç‚¹ï¼›

   seeå‡½æ•°ï¼šåˆ¤æ–­è¯¥ç‚¹æ˜¯å¦åœ¨é¢çš„æ³•å‘é‡æ–¹å‘ï¼Œå³åˆ¤æ–­ç‚¹ç§¯æ˜¯å¦å°äº0.

3. é‡å¤æ­¥éª¤2ç›´åˆ°æ‰€æœ‰ç‚¹åŠ å…¥ã€‚

```c++
#include <bits/stdc++.h>
using namespace std;

constexpr int N = 2010;
constexpr double eps = 1e-9;

int n;              // ç‚¹æ•°
double ans;         // è¡¨é¢ç§¯

struct Point3D {
    double x, y, z;

    // å‘é‡å‡æ³•
    Point3D operator-(const Point3D &b) const {
        return {x-b.x, y-b.y, z-b.z};
    }

    // å‰ç§¯
    Point3D cross(const Point3D &b) const {
        return {y*b.z - z*b.y, z*b.x - x*b.z, x*b.y - y*b.x};
    }

    // ç‚¹ç§¯
    double dot(const Point3D &b) const {
        return x*b.x + y*b.y + z*b.z;
    }

    // å‘é‡é•¿åº¦
    double len() const {
        return sqrt(x*x + y*y + z*z);
    }

    // éšæœºæ‰°åŠ¨ï¼Œé¿å…å…±é¢
    void shake() {
        double r = ((rand() / (double)RAND_MAX) - 0.5) * eps;
        x += r; y += r; z += r;
    }
} P[N];

struct Face {
    int v[3]; // é¡¶ç‚¹ç´¢å¼•

    // æ³•å‘é‡
    Point3D Normal() const {
        return (P[v[1]] - P[v[0]]).cross(P[v[2]] - P[v[0]]);
    }

    // é¢ç§¯
    double area() const {
        return Normal().len() / 2.0;
    }
};

// åˆ¤æ–­ç‚¹ b æ˜¯å¦åœ¨é¢ a å¤–ä¾§
bool see(const Face &a, const Point3D &b) {
    return ((b - P[a.v[0]]).dot(a.Normal())) > 0;
}

// ä¸‰ç»´å‡¸åŒ…å¢é‡æ³•
vector<Face> ConvexHull3D(int n) {
    vector<Face> f, C;
    int vis[N][N] = {0};  //å­˜æœ‰å‘è¾¹çš„çŠ¶æ€ï¼ˆæ˜¯å¦å¯è§ï¼‰

    // åˆå§‹åŒ–ä¸¤ä¸ªé¢ï¼ˆå‰ä¸‰ä¸ªç‚¹ï¼‰
    f.push_back({{0,1,2}});
    f.push_back({{2,1,0}});

    for(int i=3;i<n;i++){
        C.clear();
        memset(vis,0,sizeof(vis));

        // æ ‡è®°å¯è§é¢
        for(auto &face:f){
            bool v = see(face, P[i]); //v=1 å¯è§
            if(!v) C.push_back(face);
				
            //æ¯ä¸ªé¢æœ‰ä¸‰ä¸ªé¡¶ç‚¹ï¼Œæœ€åå¿…é¡»è¦å›åˆ°ç¬¬0ä¸ªç‚¹
            for(int k=0;k<3;k++)
                vis[face.v[k]][face.v[(k+1)%3]] = v; 
        }

        // æ„é€ æ–°é¢
        for(auto &face:f){
            for(int k=0;k<3;k++){
                int x = face.v[k], y = face.v[(k+1)%3];
                if(vis[x][y] && !vis[y][x])
                    C.push_back({{x,y,i}}); //(x->y)å±äºå¯è§é¢
            }
        }

        f = C; // æ›´æ–°å‡¸åŒ…
    }

    return f;
}

int main() {
    cin >> n;
    for(int i=0;i<n;i++) {
        cin >> P[i].x >> P[i].y >> P[i].z;
        P[i].shake(); // é¿å…å…±é¢
    }

    vector<Face> hull = ConvexHull3D(n);

    ans = 0;
    for(auto &face:hull) ans += face.area();

    cout << fixed << setprecision(3) << ans << "\n";
    return 0;
}
```

---

## ç»ƒä¹ é¢˜

[æœ€å¤§åœŸåœ°é¢ç§¯](https://www.luogu.com.cn/problem/P4166#ide)

```c++
#include <iostream>
#include <algorithm>
#include <vector>
#include <iomanip>
#include <cmath>
using namespace std;

struct point {
    double x, y;
    bool operator<(const point &p) const {
        return x < p.x || (x == p.x && y < p.y);
    }
    bool operator==(const point &p) const {
        return fabs(x - p.x) < 1e-9 && fabs(y - p.y) < 1e-9;
    }
};

// å‰ç§¯
double cross(point a, point b, point c) {
    return (b.x - a.x)*(c.y - a.y) - (b.y - a.y)*(c.x - a.x);
}

// Andrew ç®—æ³•ç”Ÿæˆå‡¸åŒ…
vector<point> Andrew(vector<point> p) {
    if(p.size() <= 1) return p;
    sort(p.begin(), p.end());
    p.erase(unique(p.begin(), p.end()), p.end());
    if(p.size() <= 1) return p;

    vector<point> lower, upper;

    for(int i = 0; i < p.size(); i++) {
        while(lower.size() >= 2 && cross(lower[lower.size()-2], lower.back(), p[i]) <= 0)
            lower.pop_back();
        lower.push_back(p[i]);
    }

    for(int i = p.size() - 1; i >= 0; i--) {
        while(upper.size() >= 2 && cross(upper[upper.size()-2], upper.back(), p[i]) <= 0)
            upper.pop_back();
        upper.push_back(p[i]);
    }

    lower.pop_back();
    upper.pop_back();

    vector<point> hull = lower;
    hull.insert(hull.end(), upper.begin(), upper.end());

    return hull;
}

// è®¡ç®—ä¸‰è§’å½¢é¢ç§¯
double area(point a, point b, point c) {
    return fabs(cross(a, b, c)) / 2.0;
}

int main() {
    int n;
    cin >> n;
    vector<point> p(n);
    for(int i = 0; i < n; i++) cin >> p[i].x >> p[i].y;

    vector<point> hull = Andrew(p);
    int m = hull.size();

    if(m < 4) {
        cout << "0.000\n";
        return 0;
    }

    double ans = 0;
    // æšä¸¾ i, j ä½œä¸ºä¸¤ç‚¹ï¼Œæ‰¾ä¸¤è¾¹æœ€å¤§é¢ç§¯ä¸‰è§’å½¢
    for(int i = 0; i < m; i++) {
        for(int j = i + 1; j < m; j++) {
            double max1 = 0, max2 = 0;
            // i+1 åˆ° j-1
            for(int k = i + 1; k < j; k++) max1 = max(max1, area(hull[i], hull[j], hull[k]));
            // j+1 åˆ° i+m-1 (ç»•å›å»)
            for(int k = j + 1; k < i + m; k++) max2 = max(max2, area(hull[i], hull[j], hull[k % m]));
            ans = max(ans, max1 + max2);
        }
    }

    cout << fixed << setprecision(3) << ans << "\n";
    return 0;
}
```

[ä¿¡ç”¨å¡å‡¸åŒ…](https://www.luogu.com.cn/problem/P3829)

[ä¿æŠ¤å‡ºé¢˜äºº](https://www.luogu.com.cn/problem/P3299)

---

