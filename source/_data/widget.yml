# 自定义侧边栏组件配置
card_comments:
  class_name: card-widget card-comments
  enable: false
  header:
    icon: fas fa-comments
    title: 💬 最新留言
    url: /comments/
  content: |
    <div class="recent-comments">
      <div id="recent-comments-list">
        <div class="comment-loading">
          <i class="fas fa-spinner fa-spin"></i> 加载中...
        </div>
      </div>
      <div class="view-all-comments">
        <a href="/comments/" class="btn-view-all">
          <i class="fas fa-comment-dots"></i> 查看全部留言
        </a>
      </div>
    </div>
    <script>
    // 加载最新留言
    document.addEventListener('DOMContentLoaded', function() {
      if (typeof Valine !== 'undefined') {
        // 如果 Valine 已加载，获取最新评论
        setTimeout(function() {
          loadRecentComments();
        }, 1000);
      } else {
        // 等待 Valine 加载
        var checkValine = setInterval(function() {
          if (typeof Valine !== 'undefined') {
            clearInterval(checkValine);
            loadRecentComments();
          }
        }, 500);
      }
    });
    
    function loadRecentComments() {
      var commentsList = document.getElementById('recent-comments-list');
      if (!commentsList) return;
      
      // 模拟获取最新评论数据
      var recentComments = [
        {
          nick: '访客1',
          comment: '这个博客内容很棒！',
          time: '2小时前'
        },
        {
          nick: '技术爱好者',
          comment: '学到了很多东西，感谢分享',
          time: '1天前'
        },
        {
          nick: '小明',
          comment: '代码示例很清晰',
          time: '2天前'
        }
      ];
      
      var html = '';
      recentComments.forEach(function(comment) {
        html += '<div class="recent-comment-item">';
        html += '<div class="comment-author">' + comment.nick + '</div>';
        html += '<div class="comment-content">' + comment.comment + '</div>';
        html += '<div class="comment-time">' + comment.time + '</div>';
        html += '</div>';
      });
      
      if (html === '') {
        html = '<div class="no-comments"><i class="fas fa-comment-slash"></i> 暂无留言</div>';
      }
      
      commentsList.innerHTML = html;
    }
    </script>